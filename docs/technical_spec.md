# Co-fitting 技術仕様書

## 1. システム構成

### 1.1 フロントエンド
- HTML5
- CSS3
- JavaScript
- jQuery

### 1.2 バックエンド
- Django
- Python 3.8以上

### 1.3 データベース
- ローカル環境：sqlite
- 本番環境：MySQL

### 1.4 外部サービス
- Stripe（決済処理）
- AWS（ホスティング）

## 2. アプリケーション構造

### 2.1 ディレクトリ構成
```
Co-fitting/
├── Co_fitting/          # プロジェクト設定
├── recipes/            # レシピ変換機能
├── users/              # ユーザー管理
├── purchase/           # 課金機能
├── articles/           # 記事管理
├── docs/               # ドキュメント
└── manage.py           # Django管理スクリプト
```

### 2.2 主要モジュール
- レシピ変換モジュール
- ユーザー認証モジュール
- プリセット管理モジュール
- 決済処理モジュール

## 3. データベース設計

### 3.1 テーブル構成
- users（ユーザー情報）
- recipes（レシピ情報）
- presets（プリセット情報）
- subscriptions（サブスクリプション情報）

### 3.2 リレーション
- ユーザー - プリセット（1対多）
- ユーザー - サブスクリプション（1対1）

## 4. API設計

### 4.1 レシピ変換API
- POST /api/convert
  - リクエスト：変換前レシピ、変換目標
  - レスポンス：変換後レシピ

### 4.2 プリセットAPI
- GET /api/presets
- POST /api/presets
- PUT /api/presets/{id}
- DELETE /api/presets/{id}

### 4.3 ユーザーAPI
- POST /api/auth/register
- POST /api/auth/login
- GET /api/auth/profile
- PUT /api/auth/profile

## 5. セキュリティ設計

### 5.1 認証・認可
- JWT認証
- ロールベースアクセス制御
- セッション管理

### 5.2 データ保護
- HTTPS通信
- パスワードハッシュ化
- 入力値サニタイズ

## 6. パフォーマンス最適化

### 6.1 フロントエンド
- アセットの最適化
- キャッシュ戦略
- レイジーローディング

### 6.2 バックエンド
- データベースインデックス
- クエリ最適化
- キャッシュ実装

## 7. 監視・ログ

### 7.1 監視項目
- サーバーリソース
- アプリケーションログ
- エラーログ
- アクセスログ

### 7.2 アラート設定
- リソース使用率
- エラー発生
- レスポンス時間

## 8. デプロイメント

### 8.1 環境構成
- 開発環境
- ステージング環境
- 本番環境

### 8.2 CI/CD
- GitHub Actions
- 自動テスト
- 自動デプロイ 