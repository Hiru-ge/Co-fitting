# Co-fitting 機能仕様書

## 1. レシピ変換機能

### 1.1 変換前レシピ入力
- 投数の入力（1-10投）
- 豆の量の入力（g単位）
- 各投入段階の経過時間（秒単位）
- 各投入段階の注湯量（ml単位）
- アイスモード切替
  - ON時：氷量の入力（g単位）

### 1.2 変換目標設定
- 目標豆量（g単位）
- 目標総湯量（ml単位）
- 豆と湯の比率（自動計算）
- 倍率変換モード
  - 倍率の直接入力（0.1-10.0）

### 1.3 変換後レシピ表示
- 表形式での表示
- 各投入段階の情報
  - 経過時間
  - 注湯量
  - 累計注湯量
- アイスモード時は氷量も表示

## 2. プリセット機能

### 2.1 デフォルトプリセット
- 3つの基本プリセット
  - ホットコーヒー用
  - アイスコーヒー用

### 2.2 マイプリセット
- ユーザー登録時：1枠
- 課金時：+3枠（月額100円）
- プリセットの保存
  - レシピ名
  - レシピデータ
  - 作成日時
- プリセットの編集
- プリセットの削除

## 3. ストップウォッチ機能
- スタート/ストップ
- リセット
- 経過時間表示（分:秒）

## 4. ユーザー管理機能

### 4.1 アカウント管理
- 新規登録
  - メールアドレス
  - パスワード
  - ユーザー名
- ログイン/ログアウト
- パスワードリセット

### 4.2 プロフィール管理
- プロフィール編集
- アカウント削除

## 5. 課金機能

### 5.1 サブスクリプション
- 月額100円
- プリセット枠+3
- 自動更新

### 5.2 支払い処理
- Stripe連携
- クレジットカード決済
- 領収書発行

## 6. エラー処理

### 6.1 入力値チェック
- 数値範囲チェック
- 必須項目チェック
- フォーマットチェック

### 6.2 システムエラー
- エラーメッセージ表示
- エラーログ記録

## 7. セキュリティ

### 7.1 認証・認可
- セッション管理
- アクセス制御
- CSRF対策

### 7.2 データ保護
- パスワード暗号化
- 通信暗号化
- データバックアップ 